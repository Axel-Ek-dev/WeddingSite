(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{2599:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return s(6657)}])},4487:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var r=s(5893),n=s(9008),i=s.n(n),a=s(1664),l=s.n(a),c=s(7199),o=s(7294);function d(){let[e,t]=(0,o.useState)(!1);function s(){t(!1)}return(0,r.jsxs)("header",{className:"sticky top-0 z-30 bg-cream/80 backdrop-blur-sm",children:[(0,r.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsx)("div",{className:"text-2xl font-serif text-forest",children:"A & A"})}),(0,r.jsxs)("nav",{className:"hidden md:flex items-center space-x-6 font-medium text-sm text-near-black",children:[(0,r.jsx)(l(),{href:"./",children:"Hem"}),(0,r.jsx)(l(),{href:"./info",children:"Detaljer"}),(0,r.jsx)(l(),{href:"./rsvp",children:"OSA"}),(0,r.jsx)(l(),{href:"./registry",children:"\xd6nskelista"}),(0,r.jsx)(l(),{href:"./admin/login",children:(0,r.jsx)(c.Z,{variant:"secondary",className:"py-1 px-3 text-sm",children:"Admin"})})]}),(0,r.jsx)("div",{className:"md:hidden",children:(0,r.jsx)("button",{"aria-label":"Open menu",className:"text-near-black",onClick:()=>t(e=>!e),children:"Menu"})})]}),e&&(0,r.jsx)("div",{className:"md:hidden bg-cream border-t",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-4 space-y-2",children:[(0,r.jsx)(l(),{href:"./",onClick:s,className:"block",children:"Hem"}),(0,r.jsx)(l(),{href:"./info",onClick:s,className:"block",children:"Detaljer"}),(0,r.jsx)(l(),{href:"./rsvp",onClick:s,className:"block",children:"OSA"}),(0,r.jsx)(l(),{href:"./registry",onClick:s,className:"block",children:"\xd6nskelista"}),(0,r.jsx)(l(),{href:"./admin/login",onClick:s,className:"block",children:(0,r.jsx)(c.Z,{variant:"secondary",className:"py-1 px-3 text-sm",children:"Admin"})})]})})]})}function m(){return(0,r.jsx)(d,{})}function f(){return(0,r.jsx)("footer",{className:"bg-white border-t mt-8",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-6 text-center text-sm text-gray-600",children:["\xa9 ",new Date().getFullYear()," Axel & Amanda"]})})}function u(e){let{children:t,title:s="Axel & Amanda"}=e;return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:s}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,r.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""}),(0,r.jsx)("meta",{name:"theme-color",content:"#FAF7F2"})]}),(0,r.jsx)(m,{}),(0,r.jsx)("main",{className:"container mx-auto px-4 py-8 flex-1",children:t}),(0,r.jsx)(f,{})]})}},7199:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var r=s(5893);function n(e){let{variant:t="primary",className:s="",children:n,...i}=e;return(0,r.jsx)("button",{className:"".concat("rounded-full px-5 py-2 font-medium transition-all inline-block"," ").concat("primary"===t?"bg-forest text-white hover:bg-forest-600 shadow-sm":"bg-white border border-forest text-forest hover:bg-cream"," ").concat(s),...i,children:n})}s(7294)},8551:function(e,t,s){"use strict";s.d(t,{a:function(){return l}});var r=s(6734),n=s(3454);let i=null;function a(){if(i)return i;let e=n.env.NEXT_PUBLIC_SUPABASE_URL,t=n.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!e||!t)return console.error("Supabase not configured: missing NEXT_PUBLIC_SUPABASE_URL and/or NEXT_PUBLIC_SUPABASE_ANON_KEY"),null;try{i=(0,r.eI)(e,t)}catch(e){return console.error("Failed to create Supabase client",e),null}return i}let l={async listGifts(){let e=a();if(e){let{data:t,error:s}=await e.from("gifts").select("*");if(s)throw s;return t||[]}try{let e=await fetch("./data/gifts.json");if(!e.ok)return console.error("Failed to fetch local gifts.json:",e.status,e.statusText),[];let t=await e.json();return t}catch(e){return console.error("Error fetching local gifts.json",e),[]}},async listRsvps(){let e=a();if(e){let{data:t,error:s}=await e.from("rsvps").select("*").order("createdAt",{ascending:!1});if(s)throw s;return t||[]}let t=localStorage.getItem("demo_rsvps");return t?JSON.parse(t):[]},async saveRsvp(e){let t=a();if(t){let{data:s,error:r}=await t.from("rsvps").insert([{...e}]).select().single();if(r)throw r;return s}let s=await this.listRsvps(),r={...e,id:"r_"+Date.now(),createdAt:new Date().toISOString()};return s.unshift(r),localStorage.setItem("demo_rsvps",JSON.stringify(s)),r},async reserveGift(e,t){let s=a();if(s){let{data:r,error:n}=await s.from("gifts").update({reserved:!0,reservedBy:t}).eq("id",e).select().single();if(n)throw n;return r}let r=await this.listGifts(),n=r.find(t=>t.id===e);if(!n)throw Error("Not found");return n.reserved=!0,n.reservedBy=t||null,localStorage.setItem("demo_gifts",JSON.stringify(r)),n},async unreserveGift(e){let t=a();if(t){let{data:s,error:r}=await t.from("gifts").update({reserved:!1,reservedBy:null}).eq("id",e).select().single();if(r)throw r;return s}let s=await this.listGifts(),r=s.find(t=>t.id===e);if(!r)throw Error("Not found");return r.reserved=!1,r.reservedBy=null,localStorage.setItem("demo_gifts",JSON.stringify(s)),r}}},6657:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var r=s(5893),n=s(4487),i=s(7294),a=s(1163),l=s(8551);function c(){let e=(0,a.useRouter)(),[t,s]=(0,i.useState)([]),[c,o]=(0,i.useState)([]),[d,m]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{let t=localStorage.getItem("admin_auth");if(!t){e.replace("./admin/login");return}(async function(){try{let e=await l.a.listRsvps(),t=await l.a.listGifts(),r=localStorage.getItem("demo_gifts");if(r)try{o(JSON.parse(r))}catch(e){o(t)}else o(t);s(e)}catch(e){console.error("Failed to load admin data:",e),s([]),o([])}finally{m(!1)}})()},[]),(0,r.jsxs)(n.Z,{title:"Adminpanel",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold",children:"Adminpanel"}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:function(){localStorage.removeItem("admin_auth"),e.push("./")},className:"border px-3 py-1 rounded",children:"Logga ut"})})]}),d?(0,r.jsx)("p",{className:"mt-4",children:"Laddar…"}):(0,r.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white border rounded p-4",children:[(0,r.jsxs)("h2",{className:"font-semibold",children:["OSAs (",t.length,")"]}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)("button",{onClick:function(){let e=t.map(e=>[e.id,e.name,e.email,String(e.attending),String(e.guestCount),e.mealPreference||"",e.notes||"",e.createdAt]),s=["id,name,email,attending,guestCount,mealPreference,notes,createdAt",...e.map(e=>e.map(e=>'"'+String(e).replace(/"/g,'""')+'"').join(","))].join("\n");!function(e,t){let s=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(s),n=document.createElement("a");n.href=r,n.download=e,n.click(),URL.revokeObjectURL(r)}("rsvps.csv",s)},className:"bg-forest text-white px-3 py-1 rounded",children:"Exportera CSV"})}),(0,r.jsx)("ul",{className:"mt-4 space-y-2",children:t.map(e=>(0,r.jsxs)("li",{className:"border rounded p-2",children:[(0,r.jsxs)("div",{className:"font-semibold",children:[e.name," — ",e.attending?"Kommer":"Kommer inte"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[e.email," • G\xe4ster: ",e.guestCount]})]},e.id))})]}),(0,r.jsxs)("div",{className:"bg-white border rounded p-4",children:[(0,r.jsx)("h2",{className:"font-semibold",children:"G\xe5vor"}),(0,r.jsx)("ul",{className:"mt-3 space-y-2",children:c.map(e=>(0,r.jsx)("li",{className:"border rounded p-2 flex justify-between items-center",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold",children:e.name}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:e.description}),(0,r.jsxs)("div",{className:"text-sm",children:["Status: ",e.reserved?"Reserverad":"Tillg\xe4nglig"]})]})},e.id))})]})]})]})}},1163:function(e,t,s){e.exports=s(6885)}},function(e){e.O(0,[996,734,774,888,179],function(){return e(e.s=2599)}),_N_E=e.O()}]);